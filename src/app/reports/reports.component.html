<div class="container">
  <div class="row">
    <div class="col-md-3">
      <mat-card>
        <mat-card-title class="text-center">Günlük</mat-card-title>
        <mat-card-content>
          <ng-container *ngIf="endOfDayBrief;else alertMessage">
            <app-brief-table [report]="endOfDayBrief"></app-brief-table >
          </ng-container>
          <ng-template #alertMessage>
            <div class="alert alert-light" role="alert">
              Gösterilecek bilgi bulunmuyor.
            </div>
          </ng-template>
        </mat-card-content>
        <mat-card-actions>
          <div fxLayout="row" fxLayoutAlign="end center">
            <button mat-icon-button [disabled]="!endOfDayBrief?.count" color="accent">
              Detayları Göster
              <mat-icon>insert_chart</mat-icon>
            </button>
          </div>
        </mat-card-actions>
      </mat-card>
    </div>
    <div class="col-md-3">
      <mat-card>
        <mat-card-title class="text-center">Aylık</mat-card-title>
        <mat-card-content>
          <ng-container *ngIf="lastMonthBrief;else alertMessage">
            <app-brief-table [report]="lastMonthBrief"></app-brief-table >
          </ng-container>
          <ng-template #alertMessage>
            <div class="alert alert-light" role="alert">
              Gösterilecek bilgi bulunmuyor.
            </div>
          </ng-template>
        </mat-card-content>
        <mat-card-actions>
          <div fxLayout="row" fxLayoutAlign="end center">
            <button mat-icon-button [disabled]="!lastMonthBrief?.count" (click)="getDetail('lastMonth')" color="accent">
              Detayları Göster
              <mat-icon>insert_chart</mat-icon>
            </button>
          </div>
        </mat-card-actions>
      </mat-card>
    </div>
    <div class="col-md-3">
      <mat-card>
        <mat-card-title class="text-center">3 Aylık</mat-card-title>
        <mat-card-content>
          <ng-container *ngIf="last3MonthsBrief;else alertMessage">
            <app-brief-table [report]="last3MonthsBrief"></app-brief-table >
          </ng-container>
          <ng-template #alertMessage>
            <div class="alert alert-light" role="alert">
              Gösterilecek bilgi bulunmuyor.
            </div>
          </ng-template>
        </mat-card-content>
        <mat-card-actions>
          <div fxLayout="row" fxLayoutAlign="end center">
            <button mat-icon-button [disabled]="!last3MonthsBrief?.count" (click)="getDetail('last3Months')" color="accent">
              Detayları Göster
              <mat-icon>insert_chart</mat-icon>
            </button>
          </div>
        </mat-card-actions>
      </mat-card>
    </div>
    <div class="col-md-3">
      <mat-card>
        <mat-card-title class="text-center">Yıllık</mat-card-title>
        <mat-card-content>
          <ng-container *ngIf="lastYearBrief;else alertMessage">
            <app-brief-table [report]="lastYearBrief"></app-brief-table >
          </ng-container>
          <ng-template #alertMessage>
            <div class="alert alert-light" role="alert">
              Gösterilecek bilgi bulunmuyor.
            </div>
          </ng-template>
        </mat-card-content>
        <mat-card-actions>
          <div fxLayout="row" fxLayoutAlign="end center">
            <button mat-icon-button [disabled]="!lastYearBrief?.count" (click)="getDetail('lastYear')" color="accent">
              Detayları Göster
              <mat-icon>insert_chart</mat-icon>
            </button>
          </div>
        </mat-card-actions>
      </mat-card>
    </div>
  </div>
  <hr>
  <ng-container *ngIf="reports;else alertMessageDetail">
    <div class="row">
      <div class="col-md-6">
          <mat-card class="app-detail-card">
            <mat-card-title class="text-center">Grafik</mat-card-title>
            <mat-card-content>
                <app-chart #chart [title]="title" [reports]="reports" [labelType]="labelType"></app-chart>
            </mat-card-content>
          </mat-card>
      </div>
      <div class="col-md-6">
          <mat-card class="app-detail-card">
            <mat-card-title class="text-center">Tablo</mat-card-title>
            <mat-card-subtitle class="text-center">{{ title }}&nbsp;Özet Tablosu</mat-card-subtitle>
            <mat-card-content>
              <table class="table table-sm table-responsive-sm">
                <thead>
                <tr>
                  <th scope="col">#</th>
                  <th scope="col">Adet</th>
                  <th scope="col">Tutar - TL</th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let report of reports">
                  <ng-container *ngIf="labelType === 'week';else monthDate">
                    <th scope="row">{{ report[labelType] }}</th>
                  </ng-container>
                  <ng-template #monthDate>
                    <th scope="row">{{ report[labelType] | date: "MMM":"":"tr" }}</th>
                  </ng-template>
                  <td>{{ report.count }}</td>
                  <td>{{ report.sum }}</td>
                </tr>
                </tbody>
              </table>
            </mat-card-content>
          </mat-card>
      </div>
    </div>
  </ng-container>
  <ng-template #alertMessageDetail>
    <div class="alert alert-warning text-center" role="alert">
      Grafik ve Tablo Detayı için &nbsp;<span class="text-danger font-italic">Detayları Göster</span>&nbsp; özelliğini kullanın.
    </div>
  </ng-template>
</div>
