<div class="container">
  <div class="row">
    <div class="col-md-6">
      <mat-form-field>
        <mat-select [(ngModel)]="locationName" placeholder="Oda">
          <mat-option *ngFor="let loc of locations" [value]="loc.id">
            {{ loc.viewValue }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      &nbsp;
      <ng-container *ngIf="!locationTypeSelected; else locationNo">
        <p-toggleButton onLabel="Pencere" offLabel="Pencere" (onChange)="setLocationType($event,'Pencere')"
                        onIcon="fa-check-square" offIcon="fa-square" #window></p-toggleButton>
        <p-toggleButton onLabel="Kapı" offLabel="Kapı" (onChange)="setLocationType($event,'Kapı')"
                        onIcon="fa-check-square" offIcon="fa-square" #door></p-toggleButton>
      </ng-container>
      <ng-template #locationNo>
        <mat-form-field class="input-sm">
          <span matPrefix>{{ locationTypeCode1 }}: &nbsp;</span>
          <input type="number" matInput name="locationTypeCode2" [(ngModel)]="locationTypeCode2" placeholder="No" required>
          <button mat-icon-button matSuffix (click)="clearLocationTypes()">
            <mat-icon>clear</mat-icon>
          </button>
        </mat-form-field>
      </ng-template>
      <hr>
      <p-toggleButton *ngFor="let pr of products" [(ngModel)]="selectedProducts[pr.value].isSelected"
                      (onChange)="toggleProduct($event.checked,pr.value)" onLabel="{{ pr.viewValue }}"
                      offLabel="{{ pr.viewValue }}" onIcon="fa-check-square"
                      offIcon="fa-square" [style]="{'width':'150px'}"></p-toggleButton>
    </div>
    <mat-divider [vertical]="true"></mat-divider>
    <div class="col-md-5">
        <table class="table table-sm">
          <thead>
          <th>
              {{ locationName >= 0 ? locations[locationName].viewValue : "Oda Seçiniz" }}
          </th>
          <th>
            {{ locationTypeCode1 + " " + locationTypeCode2 }}
          </th>
          <th colspan="2">
            Detay
          </th>
          </thead>
          <tbody>
          <tr *ngFor="let orderline of selectedUniqueProducts">
            <td>
              <div class="button-row float-left">
                <button mat-icon-button color="accent" (click)="removeProduct(orderline.product.productValue)">
                  <mat-icon aria-label="Perde adedini azalt">remove_circle</mat-icon>
                </button>
                <button mat-icon-button color="primary" (click)="addProduct(orderline.product.productValue)">
                  <mat-icon aria-label="Perde adedini arttır">add_circle</mat-icon>
                </button>
              </div>
            </td>
            <td style="padding-top: 15px">{{ products[orderline.product.productValue].viewValue }}</td>
            <td style="padding-top: 15px">{{ getProductCount(orderline.product.productValue) }} adet</td>
            <td style="padding-top: 15px">
              <ng-container *ngIf="(orderline.product.productValue === 2 ||
                                   orderline.product.productValue === 3 ||
                                   orderline.product.productValue === 10) &&
                                   getProductCount(orderline.product.productValue)>1">
               <mat-radio-group class="example-radio-group" [(ngModel)]="mechanismStatus">
                 <mat-radio-button matTooltip="Parçalı" [value]="1"
                                   [matTooltipHideDelay]="150"
                                   [matTooltipShowDelay]="250">P</mat-radio-button>
                  <mat-radio-button matTooltip="Tek Kasa Çoklu Mekanizma" [value]="2"
                                    [matTooltipHideDelay]="150"
                                    [matTooltipShowDelay]="250">TK</mat-radio-button>
               </mat-radio-group>
              </ng-container>
            </td>

          </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
